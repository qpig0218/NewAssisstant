<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI 新聞改寫助手</title>
    <!-- 引入 Tailwind CSS 以進行快速且美觀的樣式設計 -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- 引入 Google Fonts 和 Lucide Icons -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@400;500;700&display=swap" rel="stylesheet">
    <script src="https://unpkg.com/lucide-react@latest/dist/lucide-react.js"></script>
    <style>
        /* 使用 Noto Sans TC 作為主要字體 */
        body {
            font-family: 'Noto Sans TC', sans-serif;
        }
        /* 美化滾動條 */
        ::-webkit-scrollbar {
            width: 8px;
        }
        ::-webkit-scrollbar-track {
            background: #f1f5f9;
        }
        ::-webkit-scrollbar-thumb {
            background: #94a3b8;
            border-radius: 10px;
        }
        ::-webkit-scrollbar-thumb:hover {
            background: #64748b;
        }
        /* 按鈕點擊時的微小縮放效果 */
        .btn-action {
            transition: transform 0.1s ease;
        }
        .btn-action:active {
            transform: scale(0.95);
        }
        /* 載入動畫樣式 */
        .loader {
            border: 4px solid #f3f3f3;
            border-radius: 50%;
            border-top: 4px solid #3b82f6;
            width: 40px;
            height: 40px;
            animation: spin 1s linear infinite;
        }
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
    </style>
</head>
<body class="bg-slate-100 text-slate-800">

    <div class="container mx-auto p-4 md:p-8">
        <!-- 頂部標題 -->
        <header class="text-center mb-8">
            <h1 class="text-3xl md:text-4xl font-bold text-slate-900">AI 新聞改寫助手</h1>
            <p class="text-slate-500 mt-2">選取主題獲取新聞，並使用 AI 進行內容再創作</p>
        </header>

        <div class="grid grid-cols-1 md:grid-cols-12 gap-6">
            <!-- 左側欄：主題與新聞列表 -->
            <aside class="md:col-span-4 lg:col-span-3">
                <div class="bg-white p-4 rounded-lg shadow-md">
                    <h2 class="text-xl font-bold mb-4 border-b pb-2">新聞主題</h2>
                    <div id="topics" class="space-y-2">
                        <button onclick="fetchNews('品牌行銷', this)" class="w-full text-left p-3 rounded-lg hover:bg-blue-100 transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-blue-400">品牌行銷</button>
                        <button onclick="fetchNews('危機公關', this)" class="w-full text-left p-3 rounded-lg hover:bg-blue-100 transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-blue-400">危機公關</button>
                        <button onclick="fetchNews('AI醫療', this)" class="w-full text-left p-3 rounded-lg hover:bg-blue-100 transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-blue-400">AI醫療</button>
                    </div>
                </div>
                <div class="bg-white p-4 rounded-lg shadow-md mt-6">
                    <h2 class="text-xl font-bold mb-4 border-b pb-2">新聞列表</h2>
                    <div id="news-list-loader" class="text-center py-4 hidden">
                         <p class="text-slate-500">正在載入新聞...</p>
                    </div>
                    <ul id="news-list" class="space-y-2 max-h-96 overflow-y-auto">
                        <!-- 新聞項目將動態插入此處 -->
                        <li class="text-slate-400 p-2">請先選擇一個主題</li>
                    </ul>
                </div>
            </aside>

            <!-- 右側主內容區 -->
            <main class="md:col-span-8 lg:col-span-9">
                 <div id="main-content-area" class="bg-white p-4 sm:p-6 rounded-lg shadow-md hidden">
                    <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                        
                        <!-- 原文區塊 -->
                        <div id="original-article-section">
                            <div class="flex justify-between items-center mb-2">
                                <h3 class="text-lg font-bold">新聞原文</h3>
                                <button id="btn-copy-original" onclick="copyToClipboard('original-text')" class="btn-action flex items-center gap-2 bg-slate-200 hover:bg-slate-300 text-slate-700 font-semibold py-2 px-4 rounded-lg transition-colors duration-200 disabled:bg-slate-100 disabled:text-slate-400 disabled:cursor-not-allowed" disabled>
                                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path></svg>
                                    <span>複製全文</span>
                                </button>
                            </div>
                            <div id="original-text-loader" class="text-center py-10 hidden">
                                <p class="text-slate-500">正在抓取全文內容...</p>
                            </div>
                            <textarea id="original-text" class="w-full h-96 p-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-400 focus:border-blue-400 transition" placeholder="點擊左側新聞標題以載入全文..."></textarea>
                        </div>

                        <!-- AI 改寫區塊 -->
                        <div id="rewritten-article-section">
                             <div class="flex justify-between items-center mb-2">
                                <h3 class="text-lg font-bold">AI 改寫</h3>
                                 <button id="btn-rewrite" onclick="rewriteArticle()" class="btn-action flex items-center gap-2 bg-blue-600 hover:bg-blue-700 text-white font-semibold py-2 px-4 rounded-lg transition-colors duration-200 disabled:bg-blue-300 disabled:cursor-not-allowed" disabled>
                                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z"></path><path d="M5 3v4"></path><path d="M19 17v4"></path><path d="M3 5h4"></path><path d="M17 19h4"></path></svg>
                                    <span>AI 改寫</span>
                                </button>
                            </div>
                            <div class="mb-4">
                                <label for="prompt-display" class="text-sm font-medium text-slate-600">預設 AI 指令 (Prompt)</label>
                                <textarea id="prompt-display" rows="12" readonly class="w-full mt-1 p-3 bg-slate-100 border border-slate-200 rounded-lg text-sm text-slate-500"></textarea>
                            </div>
                            
                            <div class="flex justify-between items-center mb-2 mt-4">
                                <h3 class="text-lg font-bold">改寫後內容</h3>
                                <button id="btn-copy-rewritten" onclick="copyToClipboard('rewritten-text')" class="btn-action flex items-center gap-2 bg-green-500 hover:bg-green-600 text-white font-semibold py-2 px-4 rounded-lg transition-colors duration-200 disabled:bg-green-200 disabled:cursor-not-allowed" disabled>
                                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path></svg>
                                    <span>複製改寫文</span>
                                </button>
                            </div>
                             <div id="rewritten-text-loader" class="flex justify-center items-center h-48 hidden">
                                <div class="loader"></div>
                                <p class="ml-4 text-slate-500">AI 正在生成中...</p>
                            </div>
                            <textarea id="rewritten-text" class="w-full h-48 p-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-400 focus:border-blue-400 transition" placeholder="點擊「AI 改寫」按鈕後，結果將顯示於此..."></textarea>
                        </div>

                    </div>
                 </div>
                 <div id="welcome-message" class="text-center bg-white p-10 rounded-lg shadow-md">
                    <h2 class="text-2xl font-bold">歡迎使用 AI 新聞助手</h2>
                    <p class="mt-2 text-slate-500">請從左側選擇一個新聞主題開始探索。</p>
                 </div>
            </main>
        </div>
    </div>

    <script>
        // --- DOM 元素獲取 ---
        const newsListEl = document.getElementById('news-list');
        const originalTextEl = document.getElementById('original-text');
        const rewrittenTextEl = document.getElementById('rewritten-text');
        const promptDisplayEl = document.getElementById('prompt-display');
        
        const btnCopyOriginal = document.getElementById('btn-copy-original');
        const btnRewrite = document.getElementById('btn-rewrite');
        const btnCopyRewritten = document.getElementById('btn-copy-rewritten');
        
        const topicsContainer = document.getElementById('topics');
        const mainContentArea = document.getElementById('main-content-area');
        const welcomeMessage = document.getElementById('welcome-message');

        const newsListLoader = document.getElementById('news-list-loader');
        const originalTextLoader = document.getElementById('original-text-loader
